<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Village in a Box - Modern Clean</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        #info-panel {
            position: absolute;
            top: 30px;
            left: 30px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            padding: 28px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            max-width: 380px;
            z-index: 100;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        #info-panel h2 {
            margin: 0 0 8px 0;
            color: #1a1a1a;
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }
        
        #info-panel h2::before {
            content: "üè† ";
        }
        
        .subtitle {
            color: #6b7280;
            font-size: 16px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .instruction {
            color: #9ca3af;
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .building-block-info {
            background: linear-gradient(135deg, #f0f4ff 0%, #e8eeff 100%);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid #d1d9ff;
            transition: all 0.3s ease;
        }
        
        .building-block-info:hover {
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.15);
        }
        
        .building-block-info h3 {
            margin: 0 0 12px 0;
            color: #1a1a1a;
            font-size: 18px;
            font-weight: 600;
        }
        
        .building-block-info p {
            margin: 8px 0;
            color: #4b5563;
            line-height: 1.6;
            font-size: 14px;
        }
        
        .tag-container {
            margin-bottom: 12px;
        }
        
        .abb-tag {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #78350f;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            display: inline-block;
            margin-right: 8px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
        }
        
        .sbb-tag {
            background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
            color: #064e3b;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            display: inline-block;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 2px 8px rgba(52, 211, 153, 0.3);
        }
        
        #controls {
            position: absolute;
            bottom: 30px;
            left: 30px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            z-index: 100;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            margin: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            font-family: 'Inter', sans-serif;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .legend {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            z-index: 100;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .legend h3 {
            margin: 0 0 16px 0;
            font-size: 18px;
            color: #1a1a1a;
            font-weight: 700;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 14px;
            color: #4b5563;
            font-weight: 500;
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            margin-right: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        #canvas-container {
            width: 100vw;
            height: 100vh;
        }
        
        /* Smooth fade-in animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        #info-panel, .legend, #controls {
            animation: fadeIn 0.6s ease-out;
        }
    </style>
</head>
<body>
    <div id="info-panel">
        <h2>Village in a Box</h2>
        <p class="subtitle"><strong>Standard Resident Room</strong></p>
        <p class="instruction">Click on building blocks to explore</p>
        
        <div class="building-block-info" id="selected-block">
            <h3>üí° Interactive Model</h3>
            <p>Click any colored building block to view its ABB (Architecture Building Block) and SBB (Solution Building Block) specifications.</p>
        </div>
    </div>
    
    <div class="legend">
        <h3>Building Blocks</h3>
        <div class="legend-item">
            <div class="legend-color" style="background: #e8d4a2;"></div>
            <span>Structure / Walls</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #d4a574;"></div>
            <span>Floor</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #a0826d;"></div>
            <span>Furniture</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #5b9bd5;"></div>
            <span>Clinical Systems</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #ed7d6e;"></div>
            <span>Emergency Systems</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #95a5a6;"></div>
            <span>Infrastructure</span>
        </div>
    </div>
    
    <div id="controls">
        <button onclick="toggleView()">Toggle ABB/SBB View</button>
        <button onclick="resetCamera()">Reset View</button>
    </div>
    
    <div id="canvas-container"></div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, raycaster, mouse;
        let buildingBlocks = [];
        let selectedObject = null;
        let isABBView = true;
        
        function init() {
            // Scene with elegant background
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf8f9fa);
            scene.fog = new THREE.Fog(0xf8f9fa, 15, 50);
            
            // Camera - Professional perspective
            const aspect = window.innerWidth / window.innerHeight;
            camera = new THREE.PerspectiveCamera(50, aspect, 0.1, 1000);
            camera.position.set(8, 5, 8);
            camera.lookAt(0, 0, 0);
            
            // Renderer with high-quality settings
            renderer = new THREE.WebGLRenderer({ 
                antialias: true,
                alpha: true 
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;
            document.getElementById('canvas-container').appendChild(renderer.domElement);
            
            // MODERN CLEAN LIGHTING - Three-point lighting setup
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
            scene.add(ambientLight);
            
            // Key light (main light)
            const keyLight = new THREE.DirectionalLight(0xffffff, 0.6);
            keyLight.position.set(5, 10, 7);
            keyLight.castShadow = true;
            keyLight.shadow.mapSize.width = 2048;
            keyLight.shadow.mapSize.height = 2048;
            keyLight.shadow.camera.left = -10;
            keyLight.shadow.camera.right = 10;
            keyLight.shadow.camera.top = 10;
            keyLight.shadow.camera.bottom = -10;
            keyLight.shadow.bias = -0.0001;
            scene.add(keyLight);
            
            // Fill light (softer, opposite side)
            const fillLight = new THREE.DirectionalLight(0xffffff, 0.3);
            fillLight.position.set(-5, 5, -5);
            scene.add(fillLight);
            
            // Rim light (subtle highlight on edges)
            const rimLight = new THREE.DirectionalLight(0xaaccff, 0.2);
            rimLight.position.set(0, 3, -8);
            scene.add(rimLight);
            
            // Raycaster for interaction
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();
            
            // Create the room
            createResidentRoom();
            
            // Event listeners
            window.addEventListener('resize', onWindowResize);
            renderer.domElement.addEventListener('click', onMouseClick);
            renderer.domElement.addEventListener('mousemove', onMouseMove);
            
            // Animation loop
            animate();
        }
        
        function createResidentRoom() {
            // Floor - refined wood tone
            const floor = createBox(5, 0.1, 4, 0xd4a574);
            floor.position.set(0, 0, 0);
            floor.userData = {
                name: "Floor",
                abb: "Floor Finish",
                abbDesc: "Non-slip vinyl flooring suitable for aged care, easy to clean, infection control compliant",
                sbb: "Polyflor Polysafe Standard",
                sbbDetails: "R10 slip rating, 2mm thickness, antimicrobial coating, 15-year warranty"
            };
            scene.add(floor);
            buildingBlocks.push(floor);
            
            // Walls - warm neutral tone
            const backWall = createBox(5, 2.7, 0.15, 0xe8d4a2);
            backWall.position.set(0, 1.35, -2);
            backWall.userData = {
                name: "Wall Structure",
                abb: "Interior Wall",
                abbDesc: "Painted plasterboard wall, acoustic rated, cleanable finish",
                sbb: "Gyprock Soundchek + Dulux Wash&Wear",
                sbbDetails: "13mm plasterboard, Rw45 acoustic rating, low-VOC paint"
            };
            scene.add(backWall);
            buildingBlocks.push(backWall);
            
            const leftWall = createBox(0.15, 2.7, 4, 0xe8d4a2);
            leftWall.position.set(-2.5, 1.35, 0);
            scene.add(leftWall);
            
            const rightWall = createBox(0.15, 2.7, 4, 0xe8d4a2);
            rightWall.position.set(2.5, 1.35, 0);
            scene.add(rightWall);
            
            // Bed - refined brown
            const bed = createBox(1.0, 0.6, 2.0, 0xa0826d);
            bed.position.set(-1.2, 0.4, -0.5);
            bed.userData = {
                name: "Resident Bed",
                abb: "Electric Adjustable Bed",
                abbDesc: "3-function electric bed with hi-low adjustment, trendelenburg, battery backup",
                sbb: "Hill-Rom Progressa+ P500",
                sbbDetails: "Low height 35cm, weight capacity 250kg, nurse control panel, exit alarm capable, 5-year warranty"
            };
            scene.add(bed);
            buildingBlocks.push(bed);
            
            // Bedside table
            const bedside = createBox(0.4, 0.5, 0.4, 0xa0826d);
            bedside.position.set(-1.8, 0.35, -0.5);
            scene.add(bedside);
            
            // Wardrobe
            const wardrobe = createBox(0.5, 2.0, 1.2, 0xa0826d);
            wardrobe.position.set(1.8, 1.1, 1);
            wardrobe.userData = {
                name: "Wardrobe",
                abb: "Resident Storage",
                abbDesc: "Wardrobe with hanging space and shelving for personal items",
                sbb: "Custom Fitted Wardrobe",
                sbbDetails: "1200mm width, lockable, adjustable shelves, soft-close doors"
            };
            scene.add(wardrobe);
            buildingBlocks.push(wardrobe);
            
            // Nurse Call - modern blue
            const nurseCall = createBox(0.15, 0.15, 0.05, 0x5b9bd5);
            nurseCall.position.set(-0.3, 1.2, -1.92);
            nurseCall.userData = {
                name: "Nurse Call Point",
                abb: "Nurse Call System - Bedside",
                abbDesc: "Wired nurse call button at bedside, integration to duty station display, audio capability",
                sbb: "Austco Tacera 1800 Series",
                sbbDetails: "Wall mounted call point, cancel/emergency buttons, audio intercom, LED status indicator, IP rating: IP40"
            };
            scene.add(nurseCall);
            buildingBlocks.push(nurseCall);
            
            // Emergency Call - refined red
            const emergencyCall = createBox(0.1, 0.3, 0.1, 0xed7d6e);
            emergencyCall.position.set(1.5, 0.8, -1.5);
            emergencyCall.userData = {
                name: "Emergency Pull Cord",
                abb: "Emergency Call - Bathroom",
                abbDesc: "IP65-rated pull cord for bathroom emergency, integrates with nurse call",
                sbb: "Austco Bathroom Pull Cord IP65",
                sbbDetails: "800mm cord length, red activation button, reassurance light, waterproof rating IP65"
            };
            scene.add(emergencyCall);
            buildingBlocks.push(emergencyCall);
            
            // Data Outlet
            const dataOutlet = createBox(0.1, 0.1, 0.05, 0x95a5a6);
            dataOutlet.position.set(-0.6, 0.3, -1.92);
            dataOutlet.userData = {
                name: "Data Outlet",
                abb: "Network Connection Point",
                abbDesc: "Cat6 data outlet for clinical devices, resident VLAN, PoE capable",
                sbb: "Cat6 RJ45 Wall Plate",
                sbbDetails: "Clipsal Saturn series, terminated to patch panel in IDF, VLAN 50 (Resident Network), tested to 1Gbps"
            };
            scene.add(dataOutlet);
            buildingBlocks.push(dataOutlet);
            
            // TV
            const tv = createBox(0.05, 0.6, 1.0, 0x2c3e50);
            tv.position.set(-2.42, 1.4, 0);
            tv.userData = {
                name: "Resident TV",
                abb: "Resident Entertainment System",
                abbDesc: "Wall-mounted TV, free-to-air + streaming capable, accessible remote",
                sbb: "Samsung 43\" Smart TV (HG43ET690U)",
                sbbDetails: "Hospitality grade, VESA wall mount 1400mm center height, Foxtel compatible, USB media playback"
            };
            scene.add(tv);
            buildingBlocks.push(tv);
            
            // WiFi indicator
            const wifiIndicator = createBox(0.3, 0.1, 0.3, 0x5b9bd5);
            wifiIndicator.position.set(0, 2.8, 0);
            wifiIndicator.userData = {
                name: "WiFi Coverage",
                abb: "Wireless Network Coverage",
                abbDesc: "WiFi coverage minimum -67dBm, 2.4GHz + 5GHz, resident VLAN segregation",
                sbb: "Cisco Meraki MR46 Access Point",
                sbbDetails: "Ceiling mounted (1 AP per 8 rooms), dual-band, 802.11ax (WiFi 6), cloud managed"
            };
            scene.add(wifiIndicator);
            buildingBlocks.push(wifiIndicator);
            
            // Bathroom
            const bathroom = createBox(1.5, 0.05, 1.2, 0xd1d5db);
            bathroom.position.set(1.5, 0.08, -1.2);
            bathroom.userData = {
                name: "Ensuite Bathroom",
                abb: "Accessible Bathroom",
                abbDesc: "AS1428.1 compliant, level-access shower, emergency call, grab rails",
                sbb: "Standard Aged Care Bathroom Fitout",
                sbbDetails: "3.5sqm, Caroma aged care fixtures, Ponte Giulio grab rails, non-slip tiles"
            };
            scene.add(bathroom);
            buildingBlocks.push(bathroom);
        }
        
        function createBox(width, height, depth, color) {
            const geometry = new THREE.BoxGeometry(width, height, depth);
            
            // Modern Clean materials with subtle sophistication
            const material = new THREE.MeshPhongMaterial({ 
                color: color,
                flatShading: false,
                shininess: 35,
                specular: 0x333333,
                emissive: color,
                emissiveIntensity: 0.03
            });
            
            const mesh = new THREE.Mesh(geometry, material);
            mesh.castShadow = true;
            mesh.receiveShadow = true;
            return mesh;
        }
        
        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(buildingBlocks);
            
            buildingBlocks.forEach(block => {
                if (block.userData.originalColor) {
                    block.material.color.setHex(block.userData.originalColor);
                }
            });
            
            if (intersects.length > 0) {
                const hoveredObject = intersects[0].object;
                if (hoveredObject.userData.name) {
                    if (!hoveredObject.userData.originalColor) {
                        hoveredObject.userData.originalColor = hoveredObject.material.color.getHex();
                    }
                    hoveredObject.material.color.setHex(0xffffcc);
                    hoveredObject.material.emissiveIntensity = 0.1;
                    renderer.domElement.style.cursor = 'pointer';
                }
            } else {
                renderer.domElement.style.cursor = 'default';
            }
        }
        
        function onMouseClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(buildingBlocks);
            
            if (intersects.length > 0) {
                selectedObject = intersects[0].object;
                displayBlockInfo(selectedObject);
            }
        }
        
        function displayBlockInfo(object) {
            const infoDiv = document.getElementById('selected-block');
            
            if (object.userData.name) {
                const title = isABBView ? object.userData.abb : object.userData.sbb;
                const description = isABBView ? object.userData.abbDesc : object.userData.sbbDetails;
                const tag = isABBView ? '<span class="abb-tag">ABB</span>' : '<span class="sbb-tag">SBB</span>';
                
                infoDiv.innerHTML = `
                    <h3>${object.userData.name}</h3>
                    <div class="tag-container">${tag}</div>
                    <p><strong>${title}</strong></p>
                    <p style="font-size: 13px;">${description}</p>
                `;
            }
        }
        
        function toggleView() {
            isABBView = !isABBView;
            if (selectedObject) {
                displayBlockInfo(selectedObject);
            }
        }
        
        function resetCamera() {
            camera.position.set(8, 5, 8);
            camera.lookAt(0, 0, 0);
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            const time = Date.now() * 0.0001;
            camera.position.x = Math.sin(time) * 8;
            camera.position.z = Math.cos(time) * 8;
            camera.lookAt(0, 0, 0);
            
            renderer.render(scene, camera);
        }
        
        init();
    </script>
</body>
</html>
